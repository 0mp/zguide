#! /bin/bash
#
#   Generates and uploads the Guide in main languages
#
export Z2W_LANG=C
echo "[[include page:chapter1]]"  > all.wd
echo "[[include page:chapter2]]" >> all.wd
echo "[[include page:chapter3]]" >> all.wd
echo "[[include page:chapter4]]" >> all.wd
echo "[[include page:chapter5]]" >> all.wd
bin/z2w chapter*.txt
wdput zguide page all "ØMQ - The Guide"
wdput zguide page chapter1 "Chapter One"
wdput zguide page chapter2 "Chapter Two"
wdput zguide page chapter3 "Chapter Three"
wdput zguide page chapter4 "Chapter Four"
wdput zguide page chapter5 "Chapter Five"
sh ./upload.sh

export Z2W_LANG=PHP
echo "[[include php:chapter1]]"  > all.wd
echo "[[include php:chapter2]]" >> all.wd
echo "[[include php:chapter3]]" >> all.wd
echo "[[include php:chapter4]]" >> all.wd
echo "[[include php:chapter5]]" >> all.wd
bin/z2w chapter*.txt
wdput zguide php all "ØMQ - The Guide - PHP"
wdput zguide php chapter1 "Chapter One"
wdput zguide php chapter2 "Chapter Two"
wdput zguide php chapter3 "Chapter Three"
wdput zguide php chapter4 "Chapter Four"
wdput zguide php chapter5 "Chapter Five"

export Z2W_LANG=Lua
echo "[[include lua:chapter1]]"  > all.wd
echo "[[include lua:chapter2]]" >> all.wd
echo "[[include lua:chapter3]]" >> all.wd
echo "[[include lua:chapter4]]" >> all.wd
echo "[[include lua:chapter5]]" >> all.wd
bin/z2w chapter*.txt
wdput zguide lua all "ØMQ - The Guide - Lua"
wdput zguide lua chapter1 "Chapter One"
wdput zguide lua chapter2 "Chapter Two"
wdput zguide lua chapter3 "Chapter Three"
wdput zguide lua chapter4 "Chapter Four"
wdput zguide lua chapter5 "Chapter Five"

rm *.wd wdtemp.txt upload.sh

git add images/fig*.png .signatures
git commit -m "Published Guide"
git push origin master
