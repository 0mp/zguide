<html>
<pre class="textdiagram" id="fig54">

      +---------+ +---------+ +---------+
      | Client  | | Broker  | | Broker  |
      |         | | cloudbe | | statebe |
      +---------+ +---------+ +---------+
      | connect | | connect | |  bind   |
      +---------+ +---------+ +---------+
        request     request      state
           |           |           |
           +-+         |         +-+
             |         |         |
             v         v         v
        +---------+---------+---------+
        |  bind   |  bind   | connect |
        +---------+---------+---------+
        | localfe | cloudfe | statefe |     Frontends
        |  XREP   |  XREP   |   SUB   |     (incoming)
        +---------+---------+---------+
        |                             |
        |           Broker            |
        |                             |
        +---------+---------+---------+
        |  XREP   |  XREP   |   PUB   |     Backends
        | localbe | cloudbe | statebe |     (outgoing)
        +---------+---------+---------+
        |  bind   | connect |  bind   |
        +---------+---------+---------+
          request   request    state
             |         |         |
           +-+         |         +-+
           |           |           |
           v           v           v
      +---------+ +---------+ +---------+
      | connect | |  bind   | | connect |
      +---------+ +---------+ +---------+
      | Worker  | | Broker  | | Broker  |
      |         | | cloudfe | | statefe |
      +---------+ +---------+ +---------+


      Figure 54 - Broker socket arrangement
</pre>
</html>
